
What is orphanRemoval = true?
It tells JPA/Hibernate:
â€œIf a child entity is removed from the parentâ€™s collection or set to null, and it has no other parent, delete it from the database automatically.â€

ğŸ§© Which annotations support orphanRemoval?
You can use it with these relationship annotations:

Annotation			Supports orphanRemoval?
-----------			-----------------------
@OneToOne				âœ… Yes
@OneToMany				âœ… Yes
@ManyToOne				âŒ No
@ManyToMany				âŒ No

ğŸ§  When to use orphanRemoval = true?
- Use it when the parent fully owns the child, and:
- You want the child to be deleted from DB if removed from the parent object in Java.
- The child should not exist without its parent.

âœ… Real-world examples
1. User and Profile

@OneToOne(mappedBy = "user", cascade = CascadeType.ALL, orphanRemoval = true)
private Profile profile;

If you do:

user.setProfile(null);

â¡ï¸ Hibernate will issue a DELETE FROM profile WHERE id = ... automatically.

2. Order and OrderItems

@OneToMany(mappedBy = "order", cascade = CascadeType.ALL, orphanRemoval = true)
private List<OrderItem> items;

If you remove an item:

order.getItems().remove(item); // item is deleted from DB

ğŸš« When not to use it
- If the child is shared between multiple parents.
- If you don't want automatic deletion.

On @ManyToMany or @ManyToOne â€” it doesnâ€™t make sense (and isn't supported).

ğŸ†š Cascade vs OrphanRemoval (Quick Comparison)
Feature					CascadeType.REMOVE					orphanRemoval = true
--------				------------------					--------------------
Triggers when			Parent is deleted					Child is removed from parent
Deletes child?				âœ… Yes									âœ… Yes
Shared child safe?			âŒ No									âŒ No
Works on				@OneToOne, @OneToMany				@OneToOne, @OneToMany